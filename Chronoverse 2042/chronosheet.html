
<!-- TODO: 
  - Add fear as bonus to desire_push. 
  - Substract additional energy.
  - Add condition for showing desire_push option
  push costs X amt of energy, depending on FEAR and PAIN and the type of push.  -->

<button 
  name="roll_desire_push" 
  type="roll" 
  class="desire-bg"
  value="&amp;{template:chrono} {{action_name=Desire Push}} {{character_name=@{character_name}}} {{stat_title=Desire}} {{stat_value=@{desire}}} {{skill_title=Fear}} {{skill_value=@{fear}}} {{total_dice=[[@{desire}+@{fear}]]}} {{roll=[[[[@{desire}+@{fear}]]d6&gt;6]]}} {{desire_push_button=[@{desire_push_again_button}](~@{character_id}|desire_push)}} {{push_energy_cost=[[@{fear}+1]]}} {{energy=[[@{energy}-1-@{fear}]]}} {{energyMax=@{energy|max}}} !modattr --silent --charid @{character_id} --energy|[[-1-@{fear}]]!!!">
</button>

<button 
  name="roll_presence_push" 
  type="roll"
  class="presence-bg"
  value="&amp;{template:chrono} {{action_name=Presence Push}} {{character_name=@{character_name}}} {{stat_title=Presence}} {{stat_value=@{presence}}} {{skill_title=Pain}} {{skill_value=@{pain}}} {{total_dice=[[@{presence}+@{pain}]]}} {{roll=[[[[@{presence}+@{pain}]]d6&gt;6]]}} {{presence_push_button=[@{presence_push_again_button}](~@{character_id}|presence_push)}} {{push_energy_cost=[[@{pain}+1]]}} {{energy=[[@{energy}-1-@{pain}]]}} {{energyMax=@{energy|max}}} !modattr --silent --charid @{character_id} --energy|[[-1-@{pain}]]!!!">
</button>

<input xdata-i18n-value="Reroll" name="attr_desire_push_button" type="hidden" value="Desire Push"/>
<input xdata-i18n-value="Reroll" name="attr_presence_push_button" type="hidden" value="Presence Push"/>
<input name="attr_desire_push_again_button" type="hidden" value="Push again!"/>
<input name="attr_presence_push_again_button" type="hidden" value="Push again!"/>

<input name="attr_sheet_version" type="hidden"/>

<div class="chrono-wrapper">
  <div class="chrono-logo">
    <img src="https://i.imgur.com/dHQ6x3o.png" />
    <div class="chrono-panel turn-tracker"> 
      <span name="attr_turnTracker" value="0"></span>
    </div>
  </div>

  <div class="chrono-col1">
    
    <!-- Full Body -->
    <!-- <div class="chrono-panel">
      <div class="chrono-panel__header rand-bg-9 mid-bg dark-txt">
        <span class="chrono-panel__left" xdata-i18n="Skills">Body</span>
        <span class="chrono-panel__right" xdata-i18n="Bonus">Level</span>
      </div>
      <fieldset class="repeating_skill">
        <div class="chrono-panel__row--item chrono-panel__row--skill rand-bg-3">
          <input class="chrono-panel__input--hide" name="attr_body_skill_name" type="text"/>
          <input class="chrono-panel__input--skill" name="attr_body_skill_type" type="number" value="0"/>
          <button type="action"
        </div>
      </fieldset>
    </div> --> <!-- Body -->

    <!-- Skill(CTR) -->
    <div class="chrono-panel">
      <div class="chrono-panel__header rand-bg-9 desire-bg dark-txt">
        <span class="chrono-panel__left" xdata-i18n="Skills">Control</span>
        <span class="chrono-panel__right" xdata-i18n="Bonus">LvL</span>
      </div>
      <fieldset class="repeating_ctrl-skill">
        <div class="chrono-panel__row--skill rand-bg-3">
          <input class="chrono-panel__input--hide" name="attr_ctr-skill-title" type="text" placeholder="CTR Skill"/>
          <button 
            xclass="chrono-panel__label--button" 
            class="chrono-roll-button blank-roll-button" 
            type="roll" 
            value="&amp;{template:chrono} {{action_name=@{ctr-skill-title}}} {{character_name=@{character_name}}} {{total_dice=[[@{control}+?{Bonus Dice|0}+@{ctr-skill-value}]]}} {{roll=[[[[@{control}+?{Bonus Dice|0}+@{ctr-skill-value}]]d6&gt;6]]}} {{desire_push_button=[@{desire_push_button}](~@{character_id}|desire_push)}} {{push_energy_cost=[[@{fear}+1]]}} {{stat_value=@{control}}} {{stat_title=Control}} {{push_energy_cost=[[@{fear}+1]]}} {{bonus_dice=?{Bonus Dice|0}}} {{energy=@{energy}}} {{energyMax=@{energy|max}}} {{skill_value=@{ctr-skill-value}}} {{skill_title=@{ctr-skill-title}}} !modattr --silent --charid @{character_id} --turnTracker|[[+1]]!!!">
          </button>
          <input class="chrono-panel__input--skill" name="attr_ctr-skill-value" type="number" value="0" placeholder="0" />
        </div>
      </fieldset>
    </div> <!-- Skill(CTR) -->

    <!-- Skill(FLO) -->
    <div class="chrono-panel">
      <div class="chrono-panel__header rand-bg-9 presence-bg dark-txt">
        <span class="chrono-panel__left" xdata-i18n="Skills">Timing</span>
        <span class="chrono-panel__right" xdata-i18n="Bonus">LvL</span>
      </div>
      <fieldset class="repeating_flow-skill">
        <div class="chrono-panel__row--skill rand-bg-3">
          <input class="chrono-panel__input--hide" name="attr_flow-skill-title" type="text" placeholder="FLO Skill"/>
          <button 
            xclass="chrono-panel__label--button" 
            class="chrono-roll-button blank-roll-button" 
            type="roll" 
            value="&amp;{template:chrono} {{action_name=@{timing-skill-title}}} {{character_name=@{character_name}}} {{total_dice=[[@{control}+?{Bonus Dice|0}+@{timing-skill-value}]]}} {{roll=[[[[@{control}+?{Bonus Dice|0}+@{timing-skill-value}]]d6&gt;6]]}} {{presence_push_button=[@{presence_push_button}](~@{character_id}|presence_push)}} {{push_energy_cost=[[@{pain}+1]]}} {{stat_value=@{control}}} {{stat_title=Control}} {{push_energy_cost=[[@{pain}+1]]}} {{bonus_dice=?{Bonus Dice|0}}} {{energy=@{energy}}} {{energyMax=@{energy|max}}} !modattr --silent --charid @{character_id} --turnTracker|[[+1]]!!! {{skill_value=@{timing-skill-value}}} {{skill_title=@{timing-skill-title}}}">
          </button>
          <input class="chrono-panel__input--skill" name="attr_flow-skill-value" type="number" value="0" placeholder="0" />
        </div>
      </fieldset>
    </div> <!-- Skill(FLO) -->

    <div class="chrono-panel--full chrono-character-info full-panel">
      <div class="chrono-panel__row--span2 chrono-panel__row--type rand-bg-3">
        <input class="chrono-panel__input--hide" name="attr_politic" type="text" placeholder="Political Faction" />
        <!-- <select class="chrono-panel__input--hide" name="attr_politic">
          <option value="Futurist" checked>Futurist</option>
          <option value="Humanist">Humanist</option>
        </select> -->
      </div>
      <div class="chrono-panel__row--span2 chrono-panel__row--name rand-bg-10">
        <input class="chrono-panel__input--hide" name="attr_character_problems" type="text" placeholder="Problems" />
      </div>
      <div class="chrono-panel__row--span2 chrono-panel__row--name rand-bg-10">
        <input class="chrono-panel__input--hide" name="attr_character_goals" type="text" placeholder="Goal"/>
      </div>
      <div class="chrono-panel__row--span2 chrono-panel__row--name rand-bg-10">
        <input class="chrono-panel__input--hide" name="attr_character_triggers" type="text" placeholder="Triggers"/>
      </div>
      <div class="chrono-panel__row--span2 chrono-panel__row--name rand-bg-10">
        <input class="chrono-panel__input--hide" name="attr_character_traumas" type="text" placeholder="Traumas"/>
      </div>

    </div> <!-- character-info -->

  </div> <!-- chrono-col1 -->
  
  <div class="chrono-col2">
    <div class="chrono-col21">
      <div class="chrono-panel--alternate">
        <div class="chrono-panel__header rand-bg-2" xdata-i18n="Attributes">Body</div>

        <div class="chrono-panel__row chrono-attr-row rand-bg-6 desire-bg dark-txt">
          <button 
            class="chrono-panel__label--button" 
            xdata-i18n="Control" 
            type="roll" 
            value="&amp;{template:chrono} {{action_name=Control}} {{character_name=@{character_name}}} {{total_dice=[[@{control}+?{Bonus Dice|0}]]}} {{roll=[[[[@{control}+?{Bonus Dice|0}]]d6&gt;6]]}} {{desire_push_button=[@{desire_push_button}](~@{character_id}|desire_push)}} {{push_energy_cost=[[@{fear}+1]]}} {{stat_value=@{control}}} {{stat_title=Control}} {{bonus_dice=?{Bonus Dice|0}}} {{energy=@{energy}}} {{energyMax=@{energy|max}}}"> Control
          </button>
          <input class="chrono-panel__input--small" name="attr_control" type="number" value="0"/>
        </div> <!-- control button -->

        <div class="chrono-panel__row chrono-attr-row rand-bg-6 presence-bg dark-txt">
          <button 
            class="chrono-panel__label--button" 
            xdata-i18n="Timing" 
            type="roll" 
            value="&amp;{template:chrono} {{action_name=Timing}} {{character_name=@{character_name}}} {{total_dice=[[@{timing}+?{Bonus Dice|0}]]}} {{roll=[[[[@{timing}+?{Bonus Dice|0}]]d6&gt;6]]}} {{presence_push_button=[@{presence_push_button}](~@{character_id}|presence_push)}} {{push_energy_cost=[[@{pain}+1]]}} {{stat_value=@{timing}}} {{stat_title=timing}} {{bonus_dice=?{Bonus Dice|0}}} {{energy=@{energy}}} {{energyMax=@{energy|max}}}"> Timing
          </button>
          <input class="chrono-panel__input--small" name="attr_flow" type="number" value="0"/>
        </div> <!-- timing button -->
      </div> <!-- Body attributes -->

      <div class="chrono-panel--alternate">
        <div class="chrono-panel__header chrono-panel-light-bg rand-bg-2" xdata-i18n="Hitpoints">Hitpoint</div>

        <div class="chrono-panel__row chrono-resource-row rand-bg-6">
          <img class="heart-symbol" src="https://i.imgur.com/yxSrvMU.png"/>
          <input class="chrono-panel__input--small" name="attr_hitpoint" xplaceholder="25" title="@{attr_hitpoint}" type="number">
          <span class="minmax-display-divide"> / </span>
          <input class="chrono-panel__input--small" name="attr_hitpoint_max" xplaceholder="25" title="@{attr_hitpoint_max}" type="number">
        </div>
      </div> <!-- sheet-hitpoint-display -->

      <!-- pain display  -->
      <div class="chrono-panel--alternate">
        <div class="chrono-panel__header chrono-panel-light-bg rand-bg-2" xdata-i18n="Suffering">Pain</div>
        <div class="chrono-panel__row rand-bg-1 presence-bg dark-txt"> 
          <input class="chrono-panel__input--small" name="attr_pain" xplaceholder="25" title="@{attr_pain}" type="number" placeholder="0">
          <span class="minmax-display-divide"> / </span>
          <input type="number" name="attr_pain_tolerance" disabled="true" value="@{desire}" />
        </div>
      </div> <!-- pain display  -->

    </div> <!-- chrono-col21 -->

    <div class="chrono-col22">
      <div class="chrono-panel--full">
        <div class="chrono-panel__row--span2 chrono-panel__row--name rand-bg-10">
          <input class="chrono-panel__input--hide centered-text" name="attr_character_name" type="text" placeholder="Your Name"/>
        </div>
        <img class="chrono-meditation-man" src="https://i.imgur.com/h1ZilOT.png"/> <!-- ICON: meditating man -->
      </div>

      <!-- Spirit attributes -->
      <div class="chrono-panel--full chrono-panel--alternate">
        <div class="chrono-panel__header rand-bg-2" xdata-i18n="Attributes">Spirit</div>

        <div class="chrono-panel__row chrono-attr-row rand-bg-6 desire-bg dark-txt">
          <button 
            class="chrono-panel__label--button" 
            xdata-i18n="Desire" 
            type="roll" 
            value="&amp;{template:chrono} {{action_name=Desire}} {{character_name=@{character_name}}} {{roll=[[[[@{desire}+?{Bonus Dice|0}]]d6&gt;6]]}} {{stat_value=@{desire}}} {{stat_title=desire}} {{bonus_dice=?{Bonus Dice|0}}} "> Desire
          </button>
          <input class="chrono-panel__input--small" name="attr_desire" type="number" value="0"/>
        </div> <!-- desire button -->

        <div class="chrono-panel__row chrono-attr-row rand-bg-6 presence-bg dark-txt">
          <button 
            class="chrono-panel__label--button" 
            xdata-i18n="Presence" 
            type="roll" 
            value="&amp;{template:chrono} {{name=presence}} {{character_name=@{character_name}}} {{roll=[[[[@{presence}+?{Bonus Dice|0}]]d6&gt;6]]}} {{stat_value=@{presence}}} {{stat_title=presence}} {{bonus_dice=?{Bonus Dice|0}}} "> Presence
          </button>
          <input class="chrono-panel__input--small" name="attr_presence" type="number" value="0"/>
        </div> <!-- presence button -->
      </div> <!-- Spirit attributes -->

    </div> <!-- chrono-col22 -->

    <div class="chrono-col23">
      <div class="chrono-panel--alternate">
        <div class="chrono-panel__header rand-bg-2" xdata-i18n="Attributes">Mind</div>

        <div class="chrono-panel__row chrono-attr-row rand-bg-6 desire-bg dark-txt">
          <button 
            class="chrono-panel__label--button" 
            xdata-i18n="Logic" 
            type="roll" 
            value="&amp;{template:chrono} {{action_name=Logic}} {{character_name=@{character_name}}} {{total_dice=[[@{logic}+?{Bonus Dice|0}]]}} {{roll=[[[[@{logic}+?{Bonus Dice|0}]]d6&gt;6]]}} {{desire_push_button=[@{desire_push_button}](~@{character_id}|desire_push)}} {{push_energy_cost=[[@{fear}+1]]}} {{stat_value=@{logic}}} {{stat_title=logic}} {{bonus_dice=?{Bonus Dice|0}}} {{energy=@{energy}}} {{energyMax=@{energy|max}}}"> Logic
          </button>
          <input class="chrono-panel__input--small" name="attr_logic" type="number" value="0"/>
        </div> <!-- Logic button -->
        
        <div class="chrono-panel__row chrono-attr-row rand-bg-6 presence-bg dark-txt">
          <button 
            class="chrono-panel__label--button" 
            xdata-i18n="Insight" 
            type="roll" 
            value="&amp;{template:chrono} {{action_name=Insight}} {{character_name=@{character_name}}} {{total_dice=[[@{insight}+?{Bonus Dice|0}]]}} {{roll=[[[[@{insight}+?{Bonus Dice|0}]]d6&gt;6]]}} {{presence_push_button=[@{presence_push_button}](~@{character_id}|presence_push)}} {{push_energy_cost=[[@{pain}+1]]}} {{stat_value=@{insight}}} {{stat_title=insight}} {{bonus_dice=?{Bonus Dice|0}}} {{energy=@{energy}}} {{energyMax=@{energy|max}}}"> Insight
          </button>
          <input class="chrono-panel__input--small" name="attr_presence" type="number" value="0"/>
        </div> <!-- Insight button -->
      </div> <!-- Mind Attributes -->

      <div class="chrono-panel--alternate">
        <div class="chrono-panel__header chrono-panel-light-bg rand-bg-2" xdata-i18n="Energy">Energy </div>

        <div class="chrono-panel__row chrono-resource-row rand-bg-9">
          <img class="lightning-symbol" src="https://i.imgur.com/gpv6fx1.png"/>
          <input class="chrono-panel__input--small" name="attr_energy" xplaceholder="25" title="@{attr_energy}" type="number">
          <span class="minmax-display-divide">/  </span>
          <input class="chrono-panel__input--small" name="attr_energy_max" xplaceholder="25" title="@{attr_energy_max}" type="number">
        </div>
      </div> <!-- sheet-energy-display -->

      <!-- fear display -->
      <div class="chrono-panel--alternate">
        <div class="chrono-panel__header chrono-panel-light-bg rand-bg-9" xdata-i18n="Suffering">Fear</div>
        <div class="chrono-panel__row rand-bg-1 desire-bg dark-txt"> 
          <input class="chrono-panel__input--small" name="attr_fear" xplaceholder="25" title="@{attr_fear}" type="number" placeholder="0">
          <span class="minmax-display-divide"> / </span>
          <input type="number" name="attr_fear_tolerance" disabled="true" value="@{presence}"/>
        </div>
      </div> <!-- fear display  -->
    </div> <!-- chrono-col23 -->

    <!-- chrono-items -->
    <div class="chrono-panel chrono-panel--full">
      <div class="chrono-panel__header rand-bg-9 chrono-panel-light-bg">
        <span class="chrono-panel__left" xdata-i18n="Items">Items</span>
        <span class="chrono-panel__right" xdata-i18n="Bonus">Qty</span>
      </div>
      <!-- <div class="chrono-panel__row--iconic rand-bg-6">
        <span class="chrono-panel__label--small" data-i18n="Iconic Item">Iconic Item</span>
        <input class="chrono-panel__input--hide" name="attr_iconic_item" type="text"/>
        <span class="chrono-panel__label--value">+2</span>
      </div> -->
      <fieldset class="repeating_item">
        <div class="chrono-panel__row--item rand-bg-3">
          <input class="chrono-panel__input--hide" name="attr_item_name" type="text"/>
          <!-- <span class="chrono-panel__label--plus">+</span> -->
          <input class="chrono-panel__input--item" name="attr_item_bonus" type="number" value="0"/>
        </div>
      </fieldset>
    </div> <!-- chrono-items -->

    <!-- chrono-relationships -->
    <div class="chrono-panel chrono-panel--full">
      <div class="chrono-panel__header rand-bg-5 chrono-panel-light-bg" xdata-i18n="Relationships">
        <span class="chrono-panel__left" xdata-i18n="Items">Relationships</span>
        <span class="chrono-panel__right" xdata-i18n="Bonus">Connection</span>
      </div>
      <fieldset class="repeating_relationships">
        <div class="chrono-panel__row--item chrono-panel__row--relationship rand-bg-5">
          <select class="chrono-panel__label--select" name="attr_relationship_type">
            <option data-i18n="PC">PC</option>
            <option data-i18n="NPC">NPC</option>
          </select>
          <input class="chrono-panel__input--hide" name="attr_relationship" type="text"/>
          <input class="chrono-panel__input--item" name="attr_relationship_connection" type="number" value="0"/>
        </div>
      </fieldset>
    </div> <!-- chrono-relationships -->
  </div> <!-- chrono-col2 -->

  <div class="chrono-col3">
    <!-- Full MIND -->
    <!-- <div class="chrono-panel">
      <div class="chrono-panel__header rand-bg-9 mid-bg dark-txt">
        <span class="chrono-panel__left" xdata-i18n="Skills">Mind</span>
        <span class="chrono-panel__right" xdata-i18n="Bonus">Level</span>
      </div>
      <fieldset class="repeating_skill">
        <div class="chrono-panel__row--skill rand-bg-3">
          <input class="chrono-panel__input--hide" name="attr_mind_skill_name" type="text"/>
          <input class="chrono-panel__input--skill" name="attr_mind_skill_type" type="number" value="0"/>
        </div>
      </fieldset>
    </div> --> <!-- Full MIND -->

    <!-- Skill(LOG) -->
    <div class="chrono-panel">
      <div class="chrono-panel__header rand-bg-9 desire-bg dark-txt">
        <span class="chrono-panel__left" xdata-i18n="Skills">Logic</span>
        <span class="chrono-panel__right" xdata-i18n="Bonus">LvL</span>
      </div>
      <fieldset class="repeating_log-skill">
        <div class="chrono-panel__row--skill rand-bg-3">
          <input class="chrono-panel__input--hide" name="attr_log-skill-title" type="text" placeholder="LOG Skill"/>
          <button 
            xclass="chrono-panel__label--button" 
            class="chrono-roll-button blank-roll-button" 
            type="roll" 
            value="&amp;{template:chrono} {{action_name=@{log-skill-title}}} {{character_name=@{character_name}}} {{total_dice=[[@{logic}+?{Bonus Dice|0}+@{log-skill-value}]]}} {{roll=[[[[@{logic}+?{Bonus Dice|0}+@{log-skill-value}]]d6&gt;6]]}} {{desire_push_button=[@{desire_push_button}](~@{character_id}|desire_push)}} {{push_energy_cost=[[@{fear}+1]]}} {{stat_value=@{logic}}} {{stat_title=logic}} {{push_energy_cost=[[@{fear}+1]]}} {{bonus_dice=?{Bonus Dice|0}}} {{energy=@{energy}}} {{energyMax=@{energy|max}}} {{skill_value=@{log-skill-value}}} {{skill_title=@{log-skill-title}}} !modattr --silent --charid @{character_id} --turnTracker|[[+1]]!!!">
          </button>
          <input class="chrono-panel__input--skill" name="attr_log-skill-value" type="number" value="0" placeholder="0" />
        </div>
      </fieldset>
    </div> <!-- Skill(LOG) -->

    <!-- Skill(VIB) -->
    <div class="chrono-panel">
      <div class="chrono-panel__header rand-bg-9 presence-bg dark-txt">
        <span class="chrono-panel__left" xdata-i18n="Skills">Insight</span>
        <span class="chrono-panel__right" xdata-i18n="Bonus">LvL</span>
      </div>
      <fieldset class="repeating_vib-skill">
        <div class="chrono-panel__row--skill rand-bg-3">
          <input class="chrono-panel__input--hide" name="attr_vib-skill-title" type="text" placeholder="VIB Skill"/>
          <button 
            xclass="chrono-panel__label--button" 
            class="chrono-roll-button blank-roll-button" 
            type="roll" 
            value="&amp;{template:chrono} {{action_name=@{vib-skill-title}}} {{character_name=@{character_name}}} {{total_dice=[[@{insight}+?{Bonus Dice|0}+@{vib-skill-value}]]}} {{roll=[[[[@{insight}+?{Bonus Dice|0}+@{vib-skill-value}]]d6&gt;6]]}} {{presence_push_button=[@{presence_push_button}](~@{character_id}|presence_push)}} {{push_energy_cost=[[@{pain}+1]]}} {{stat_value=@{insight}}} {{stat_title=Control}} {{push_energy_cost=[[@{pain}+1]]}} {{bonus_dice=?{Bonus Dice|0}}} {{energy=@{energy}}} {{energyMax=@{energy|max}}} !modattr --silent --charid @{character_id} --turnTracker|[[+1]]!!! {{skill_value=@{vib-skill-value}}} {{skill_title=@{vib-skill-title}}}">
          </button>
          <input class="chrono-panel__input--skill" name="attr_vib-skill-value" type="number" value="0" placeholder="0" />
        </div>
      </fieldset>
    </div> <!-- Skill(VIB) -->

    <div class="chrono-panel--alternate">
      <div class="chrono-panel__header rand-bg-2 chrono-panel-light-bg" xdata-i18n="Character Level">Level</div>

      <div class="chrono-panel__row rand-bg-6">
        <input type="number" name="attr_character_level" value="@{control}*2+@{timing}*2+@{logic}*2+@{insight}*2+@{desire}*5+@{presence}*5" disabled="true" />
      </div>
    </div> <!-- sheet-level-display -->

    <div class="chrono-panel--alternate">
      <div class="chrono-panel__header rand-bg-2 chrono-panel-light-bg" xdata-i18n="Level">Experience</div>

      <div class="chrono-panel__row rand-bg-6">
        <input type="number" name="attr_character_exp"/>
      </div>
    </div> <!-- sheet-exp-display -->

  </div> <!-- chrono-col3 -->
  
</div> <!-- chrono-wrapper -->

<rolltemplate class="sheet-rolltemplate-chrono">
  {{#desire_push_button}}
  <div class="sheet-chrono-container sheet-desire-theme">
  {{/desire_push_button}}

  {{#presence_push_button}}
  <div class="sheet-chrono-container sheet-presence-theme">
  {{/presence_push_button}}

    {{#action_name}}
      <h1>{{action_name}}</h1>
    {{/action_name}}

    {{#character_name}}
      <h2>{{character_name}} </h2>
    {{/character_name}}

    <div class="sheet-chrono-body">
      {{#stat_value}}
        <div class="sheet-chrono-roll-row">
          <span>{{stat_title}}</span><span>({{stat_value}})</span>
        </div>
      {{/stat_value}}
      
      {{#skill_value}}
        <div class="sheet-chrono-roll-row">
          <span>{{skill_title}}</span><span>({{skill_value}})</span></div>
      {{/skill_value}}

      {{#bonus_dice}}
        <div class="sheet-chrono-roll-row">
          <span data-i18n="Bonus">Bonus</span><span>(+{{bonus_dice}}) </span>
        </div>
      {{/bonus_dice}}
      
    </div>
    <div class="sheet-chrono-roll">
      <span>{{roll}}/{{total_dice}}</span> <span>Successes</span>
    </div>

    <div class="sheet-chrono-buttons">
      {{#desire_push_button}}
        <div class="desire-bg">
        {{desire_push_button}}
        </div>
        <div class="sheet-chrono-buttontext">Use {{push_energy_cost}} energy to push </div>
      {{/desire_push_button}}

      {{#presence_push_button}}
        {{presence_push_button}}
        <div class="sheet-chrono-buttontext" 
          xdata-i18n="">
          Use {{push_energy_cost}} energy to push
        </div>
      {{/presence_push_button}}
      
      <div class="sheet-chrono-buttontext">({{energy}}/{{energyMax}} energy)</div>
    </div>

    <div class="sheet-chrono-footer"></div>

  </div> <!-- sheet-chrono-container -->
</rolltemplate>

<script type="text/worker">
  on("sheet:opened", eventInfo => {
    getAttrs(["sheet_version"], values => {
      if (values["sheet_version"] !== "1") {
        getAttrs(["song", "iconic", "totalluck"], values => {
          const set_attrs = {};

          set_attrs["favourite_song"] = values["song"];
          set_attrs["iconic_item"] = values["iconic"];
          set_attrs["luck_max"] = values["totalluck"];
          set_attrs["sheet_version"] = 1;

          setAttrs(set_attrs);
        })

      }
    })
  });

  on('clicked:add', function() {
    // console.log("payton was here");

    getAttrs(['level'], function(values) {
        // get the level stat, and coerce into a numerical value.
        const level = +values.level || 0; 
        // increase by 1
        const newlevel = level +1;
        // save the updated attribute to the sheet
        setAttrs({
           level: newlevel 
        });
   });
  });
</script>